language: python
before_install:
  - pip install pep8
  - git clone https://github.com/MycroftAI/mycroft-core.git
  - sudo apt-get update -qq
  - sudo apt-get install -qq mpg123 portaudio19-dev libglib2.0-dev swig bison libtool autoconf libglib2.0-dev libicu-dev libfann-dev realpath

python:
  - "3.4"
  - "3.5"
  - "3.6"

cache: pocketsphinx-python
install:
 - pwd
 - ls -lah
 - VIRTUALENV_ROOT=${VIRTUAL_ENV} ./mycroft-core/dev_setup.sh -sm
 - pip install -r mycroft-core/requirements.txt
 - pip install -r mycroft-core/test-requirements.txt
 - ~/virtualenv/python3.4/bin/msm install https://github.com/btotharye/mycroft-homeassistant.git
 
    
script:
 - pep8 __init__.py
 - ls -lah $TRAVIS_BUILD_DIR/mycroft-core/test/integrationtest
 - python $TRAVIS_BUILD_DIR/mycroft-core/test/integrationtest/skills/single_test.py /opt/mycroft/skills/mycroft-homeassistant.btotharye
